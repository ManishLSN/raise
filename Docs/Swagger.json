{
    "swagger": "2.0",
    "info": {
        "version": "0.3.0",
        "title": "UIOT RAISE API"
    },
    "parameters": {
        "auth-token": {
            "name": "token",
            "in": "query",
            "required": true,
            "description": "client token",
            "type": "string"
        }
    },
    "paths": {
        "/client/": {
            "get": {
                "tags": [
                    "client"
                ],
                "description": "Get registered clients",
                "parameters": [
                    {
                        "name": "name",
                        "in": "query",
                        "description": "client name",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "processor",
                        "in": "query",
                        "description": "client processor name",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "channel",
                        "in": "query",
                        "description": "client communication channel id",
                        "required": true,
                        "type": "number"
                    },
                    {
                        "name": "host",
                        "in": "query",
                        "description": "client host name (for example - ip, domain...)",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "tag",
                        "in": "query",
                        "description": "client tag",
                        "required": true,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "schema": {
                            "required": [
                                "code",
                                "clients"
                            ],
                            "title": "clients",
                            "type": "object",
                            "properties": {
                                "code": {
                                    "type": "integer",
                                    "example": 200
                                },
                                "clients": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/definitions/Client"
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Invalid or expired token",
                        "schema": {
                            "$ref": "#/definitions/Error401"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/Error403"
                        }
                    }
                }
            }
        },
        "/client/register/": {
            "post": {
                "tags": [
                    "client"
                ],
                "description": "Register a client",
                "parameters": [
                    {
                        "name": "client",
                        "in": "body",
                        "required": true,
                        "description": "client attributes",
                        "schema": {
                            "$ref": "#/definitions/Client"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/TokenResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid parameters",
                        "schema": {
                            "$ref": "#/definitions/Error400"
                        }
                    },
                    "403": {
                        "description": "Forbbiden",
                        "schema": {
                            "$ref": "#/definitions/Error403"
                        }
                    },
                    "422": {
                        "description": "Unprocessable Entity",
                        "schema": {
                            "$ref": "#/definitions/Error422"
                        }
                    },
                    "429": {
                        "description": "Too many requests",
                        "schema": {
                            "$ref": "#/definitions/Error429"
                        }
                    }
                }
            }
        },
        "/service/": {
            "get": {
                "tags": [
                    "service"
                ],
                "description": "Get registered services",
                "parameters": [
                    {
                        "$ref": "#/parameters/auth-token"
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Limits the amount of records for request. Used to prevent memory issues.",
                        "required": true,
                        "type": "number"
                    },
                    {
                        "name": "order",
                        "in": "query",
                        "description": "Bool. 0 for asc and 1 for desc.",
                        "required": true,
                        "type": "boolean"
                    },
                    {
                        "name": "name",
                        "in": "query",
                        "description": "client name",
                        "required": true,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "schema": {
                            "required": [
                                "code",
                                "services"
                            ],
                            "title": "Service",
                            "type": "object",
                            "properties": {
                                "code": {
                                    "type": "integer",
                                    "example": 200
                                },
                                "services": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/definitions/Services"
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid parameters",
                        "schema": {
                            "$ref": "#/definitions/Error400"
                        }
                    },
                    "401": {
                        "description": "Invalid or expired token",
                        "schema": {
                            "$ref": "#/definitions/Error401"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/Error403"
                        }
                    },
                    "429": {
                        "description": "Too many requests",
                        "schema": {
                            "$ref": "#/definitions/Error429"
                        }
                    }
                }
            }
        },
        "/service/register/": {
            "post": {
                "tags": [
                    "service"
                ],
                "description": "Register an array of services",
                "parameters": [
                    {
                        "$ref": "#/parameters/auth-token"
                    },
                    {
                        "name": "services",
                        "in": "body",
                        "required": true,
                        "description": "an array of services to be registered",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/Service"
                            }
                        }
                    },
                    {
                        "name": "type",
                        "in": "query",
                        "required": true,
                        "description": "indicates if service actuates on environment",
                        "type": "boolean"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/TokenResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid parameters",
                        "schema": {
                            "$ref": "#/definitions/Error400"
                        }
                    },
                    "401": {
                        "description": "Invalid or expired token",
                        "schema": {
                            "$ref": "#/definitions/Error401"
                        }
                    },
                    "403": {
                        "description": "Forbbiden",
                        "schema": {
                            "$ref": "#/definitions/Error403"
                        }
                    },
                    "422": {
                        "description": "Unprocessable Entity",
                        "schema": {
                            "$ref": "#/definitions/Error422"
                        }
                    },
                    "429": {
                        "description": "Too many requests",
                        "schema": {
                            "$ref": "#/definitions/Error429"
                        }
                    }
                }
            }
        },
        "/data/": {
            "get": {
                "tags": [
                    "data"
                ],
                "description": "Get registered data",
                "parameters": [
                    {
                        "$ref": "#/parameters/auth-token"
                    },
                    {
                        "name": "start_date",
                        "in": "query",
                        "description": "In the case of a search between a time interval, this is the starting date",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "name": "end_date",
                        "in": "query",
                        "description": "In the case of a search between a time interval, this is the ending date",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Limits the amount of records for request",
                        "required": false,
                        "type": "number"
                    },
                    {
                        "name": "order",
                        "in": "query",
                        "description": "Bool. 0 for asc and 1 for desc.",
                        "required": false,
                        "type": "boolean"
                    },
                    {
                        "name": "name",
                        "in": "query",
                        "description": "data name",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "name": "processor",
                        "in": "query",
                        "description": "data processor",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "name": "channel",
                        "in": "query",
                        "description": "data channel",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "name": "host",
                        "in": "query",
                        "description": "data host",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "name": "tag",
                        "in": "query",
                        "description": "tag host",
                        "required": false,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/Data"
                        }
                    },
                    "400": {
                        "description": "Invalid parameters",
                        "schema": {
                            "$ref": "#/definitions/Error400"
                        }
                    },
                    "401": {
                        "description": "Invalid or expired token",
                        "schema": {
                            "$ref": "#/definitions/Error401"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/Error403"
                        }
                    },
                    "429": {
                        "description": "Too many requests",
                        "schema": {
                            "$ref": "#/definitions/Error429"
                        }
                    }
                }
            }
        },
        "/data/register/": {
            "post": {
                "tags": [
                    "data"
                ],
                "description": "Register some data",
                "parameters": [
                    {
                        "name": "data",
                        "in": "body",
                        "required": true,
                        "description": "an array of data to be registered",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/Data"
                            }
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/TokenResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid parameters",
                        "schema": {
                            "$ref": "#/definitions/Error400"
                        }
                    },
                    "401": {
                        "description": "Invalid or expired token",
                        "schema": {
                            "$ref": "#/definitions/Error401"
                        }
                    },
                    "403": {
                        "description": "Forbbiden",
                        "schema": {
                            "$ref": "#/definitions/Error403"
                        }
                    },
                    "422": {
                        "description": "Unprocessable Entity",
                        "schema": {
                            "$ref": "#/definitions/Error422"
                        }
                    },
                    "429": {
                        "description": "Too many requests",
                        "schema": {
                            "$ref": "#/definitions/Error429"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "Client": {
            "required": [
                "name",
                "chipset",
                "mac",
                "serial",
                "processor",
                "channel"
            ],
            "type": "object",
            "properties": {
                "name": {
                    "type": "string",
                    "example": "Raspberry PI"
                },
                "chipset": {
                    "type": "string",
                    "example": "AMD 790FX"
                },
                "mac": {
                    "type": "string",
                    "example": "FF:FF:FF:FF:FF:FF"
                },
                "serial": {
                    "type": "string",
                    "example": "C210"
                },
                "processor": {
                    "type": "string",
                    "example": "Intel I3"
                },
                "channel": {
                    "type": "string",
                    "example": "Ethernet"
                }
            }
        },
        "Data": {
            "required": [
                "code",
                "service_id",
                "values"
            ],
            "type": "object",
            "properties": {
                "code": {
                    "type": "integer",
                    "example": 200
                },
                "service_id": {
                    "type": "integer",
                    "example": 15
                },
                "values": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/DataValues"
                    }
                },
                "tag": {
                    "type": "string",
                    "example": "Chip"
                }
            }
        },
        "DataValues": {
            "type": "object",
            "properties": {
                "value1": {
                    "type": "string",
                    "example": 35
                },
                "value2": {
                    "type": "string",
                    "example": "Umidade 12%"
                }
            }
        },
        "Services": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "integer",
                    "example": 15
                },
                "name": {
                    "type": "string",
                    "example": "Get temp"
                },
                "parameters": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Parameter"
                    }
                },
                "return_type": {
                    "type": "string",
                    "example": "float"
                }
            }
        },
        "Service": {
            "required": [
                "name",
                "return",
                "params"
            ],
            "type": "object",
            "properties": {
                "name": {
                    "type": "string",
                    "example": "Send temperature"
                },
                "return": {
                    "type": "string",
                    "example": "273K"
                },
                "params": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Parameter"
                    }
                }
            }
        },
        "Parameter": {
            "type": "object",
            "properties": {
                "name": {
                    "type": "string",
                    "example": "Temp"
                },
                "type": {
                    "type": "string",
                    "example": "float"
                }
            }
        },
        "Error400": {
            "required": [
                "code",
                "message"
            ],
            "type": "object",
            "properties": {
                "code": {
                    "type": "integer",
                    "example": 400
                },
                "message": {
                    "type": "string",
                    "example": "Invalid Parameters"
                }
            }
        },
        "Error401": {
            "required": [
                "code",
                "message"
            ],
            "type": "object",
            "properties": {
                "code": {
                    "type": "integer",
                    "example": 401
                },
                "message": {
                    "type": "string",
                    "example": "Unauthorized"
                }
            }
        },
        "Error403": {
            "required": [
                "code",
                "message"
            ],
            "type": "object",
            "properties": {
                "code": {
                    "type": "integer",
                    "example": 403
                },
                "message": {
                    "type": "string",
                    "example": "Forbidden"
                }
            }
        },
        "Error422": {
            "required": [
                "code",
                "message"
            ],
            "type": "object",
            "properties": {
                "code": {
                    "type": "integer",
                    "example": 422
                },
                "message": {
                    "type": "string",
                    "example": "Unprocessable Entity"
                }
            }
        },
        "Error429": {
            "required": [
                "code",
                "message"
            ],
            "type": "object",
            "properties": {
                "code": {
                    "type": "integer",
                    "example": 429
                },
                "message": {
                    "type": "string",
                    "example": "Too many requests"
                }
            }
        },
        "TokenResponse": {
            "required": [
                "code",
                "message"
            ],
            "type": "object",
            "properties": {
                "code": {
                    "type": "integer",
                    "example": 0
                },
                "message": {
                    "type": "string",
                    "example": "Success"
                }
            }
        }
    }
}
